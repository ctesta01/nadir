<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Super learning with flexible formulas • nadir</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.0/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Super learning with flexible formulas">
<meta name="description" content="`nadir::super_learner()` offers improvements compared to past implementations of the SuperLearner algorithm including the ability to easily use random-effects specified in formulas (like `y ~ (age | strata) + ...`) and construction of new learners is as simple as writing and passing a new function.">
<meta property="og:description" content="`nadir::super_learner()` offers improvements compared to past implementations of the SuperLearner algorithm including the ability to easily use random-effects specified in formulas (like `y ~ (age | strata) + ...`) and construction of new learners is as simple as writing and passing a new function.">
<meta property="og:image" content="https://ctesta01.github.io/nadir/logo.png">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">nadir</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/comparison_to_SuperLearner.html">Comparison to `{SuperLearner}`</a></li>
    <li><a class="dropdown-item" href="articles/currying_closures_and_function_factories.html">Currying, Closures, and Function Factories</a></li>
    <li><a class="dropdown-item" href="articles/Density-Estimation.html">Density Estimation</a></li>
    <li><a class="dropdown-item" href="articles/Doubly-Robust-Estimation.html">Doubly Robust Estimation</a></li>
    <li><a class="dropdown-item" href="articles/FAQs.html">FAQs</a></li>
    <li><a class="dropdown-item" href="articles/Guidance-for-Developers.html">Guidance for Developers</a></li>
    <li><a class="dropdown-item" href="articles/Visualizing-Performance.html">Visualizing Performance</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ctesta01/nadir/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="nadir-">
<code>{nadir}</code> <a class="anchor" aria-label="anchor" href="#nadir-"></a>
</h1>
</div>
<p><em>nadir</em> (noun): nā-dir</p>
<blockquote>
<p>the lowest point.</p>
</blockquote>
<p>Fitting with the <em>minimum loss based estimation</em><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;van der Laan, Mark J. and Dudoit, Sandrine, “Unified Cross-Validation Methodology For Selection Among Estimators and a General Cross-Validated Adaptive Epsilon-Net Estimator: Finite Sample Oracle Inequalities and Examples” (November 2003). U.C. Berkeley Division of Biostatistics Working Paper Series. Working Paper 130. &lt;a href="https://biostats.bepress.com/ucbbiostat/paper130" class="external-link uri"&gt;https://biostats.bepress.com/ucbbiostat/paper130&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Zheng, W., &amp;amp; van der Laan, M. J. (2011). Cross-Validated Targeted Minimum-Loss-Based Estimation. In Springer Series in Statistics (pp. 459–474). Springer New York. &lt;a href="https://doi.org/10.1007/978-1-4419-9782-1_27" class="external-link uri"&gt;https://doi.org/10.1007/978-1-4419-9782-1_27&lt;/a&gt;&lt;/p&gt;'><sup>2</sup></a> literature, <a href="https://ctesta01.github.io/nadir/">nadir</a> is an implementation of the Super Learner algorithm with improved support for flexible formula based syntax and which is fond of functional programming techniques such as closures, currying, and function factories.</p>
<hr>
<p><a href="https://ctesta01.github.io/nadir/">nadir</a> implements the Super Learner<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;van der Laan, M. J., Polley, E. C., &amp;amp; Hubbard, A. E. (2007). Super Learner. In Statistical Applications in Genetics and Molecular Biology (Vol. 6, Issue 1). Walter de Gruyter GmbH. &lt;a href="https://doi.org/10.2202/1544-6115.1309" class="external-link uri"&gt;https://doi.org/10.2202/1544-6115.1309&lt;/a&gt; &lt;a href="https://pubmed.ncbi.nlm.nih.gov/17910531/" class="external-link uri"&gt;https://pubmed.ncbi.nlm.nih.gov/17910531/&lt;/a&gt;&lt;/p&gt;'><sup>3</sup></a> algorithm. To quote <em>the Guide to SuperLearner</em><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Guide to &lt;a href="https://github.com/ecpolley/SuperLearner" class="external-link"&gt;SuperLearner&lt;/a&gt;: &lt;a href="https://cran.r-project.org/web/packages/SuperLearner/vignettes/Guide-to-SuperLearner.html" class="external-link uri"&gt;https://cran.r-project.org/web/packages/SuperLearner/vignettes/Guide-to-SuperLearner.html&lt;/a&gt;&lt;/p&gt;'><sup>4</sup></a>:</p>
<blockquote>
<p>SuperLearner is an algorithm that uses cross-validation to estimate the performance of multiple machine learning models, or the same model with different settings. It then creates an optimal weighted average of those models, aka an “ensemble”, using the test data performance. This approach has been proven to be asymptotically as accurate as the best possible prediction algorithm that is tested.</p>
</blockquote>
<div class="section level2">
<h2 id="why-nadir-and-why-reimplement-super-learner-again">Why <code>{nadir}</code> and why reimplement Super Learner again?<a class="anchor" aria-label="anchor" href="#why-nadir-and-why-reimplement-super-learner-again"></a>
</h2>
<p>In previous implementations (<a href="https://github.com/ecpolley/SuperLearner" class="external-link"><code>{SuperLearner}</code></a>, <a href="https://github.com/tlverse/sl3/" class="external-link"><code>{sl3}</code></a>, <a href="https://cran.r-project.org/web/packages/mlr3superlearner/mlr3superlearner.pdf" class="external-link"><code>{mlr3superlearner}</code></a>), support for <em>flexible formula-based syntax</em> has been limited, instead opting for specifying learners as models on an <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math> matrix and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math> outcome vector. Many popular R packages such as <code>lme4</code> and <code>mgcv</code> (for random effects and generalized additive models) use formulas extensively to specify models using syntax like <code>(age | strata)</code> to specify random effects on age by strata, or <code>s(age, income)</code> to specify a smoothing term on <code>age</code> and <code>income</code> simultaneously.</p>
<p>At present, it is difficult to use these kinds of features in <a href="https://github.com/ecpolley/SuperLearner" class="external-link">SuperLearner</a>, <a href="https://tlverse.org/sl3" class="external-link">sl3</a> and <code>{ml3superlearner}</code>.</p>
<p>For example, it is easy to imagine the Super Learner algorithm being appealing to modelers fond of random effects based models because they may want to hedge on the exact nature of the random effects models, not sure if random intercepts are enough or if random slopes should be included, etc., and similar other modeling decisions in other frameworks.</p>
<p>Therefore, the <a href="https://ctesta01.github.io/nadir/">nadir</a> package takes as its charges to:</p>
<ul>
<li>Implement a syntax in which it is easy to specify <em>different formulas</em> for each of many candidate learners.</li>
<li>To make it easy to pass new learners to the Super Learner algorithm.</li>
</ul>
</div>
</div>
<div class="section level1">
<h1 id="installation-instructions">Installation Instructions<a class="anchor" aria-label="anchor" href="#installation-instructions"></a>
</h1>
<p>At present, <a href="https://ctesta01.github.io/nadir/">nadir</a> is only available on GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ctesta01/nadir"</span><span class="op">)</span></span></code></pre></div>
<p><b><i>Warning: this package is currently under active development and may be wrong!</i> Do not use this for serious applications until this message has been removed, likely at the time of a future release.</b></p>
</div>
<div class="section level1">
<h1 id="demonstration">Demonstration<a class="anchor" aria-label="anchor" href="#demonstration"></a>
</h1>
<p>First, let’s start with the simplest possible use case of <code><a href="reference/super_learner.html">nadir::super_learner()</a></code>, which is where the user would like to feed in data, a specification for some regression formula(s), specify a library of learners, and get back a prediction function that is suitable for plugging into downstream analyses, like in Targeted Learning or for pure-prediction applications.</p>
<p>Here is a demo of an extremely simple application of using <code><a href="reference/super_learner.html">nadir::super_learner</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ctesta01.github.io/nadir/">nadir</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># we'll use a few basic learners</span></span>
<span><span class="va">learners</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>     glm <span class="op">=</span> <span class="va">lnr_glm</span>,</span>
<span>     rf <span class="op">=</span> <span class="va">lnr_rf</span>,</span>
<span>     glmnet <span class="op">=</span> <span class="va">lnr_glmnet</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co"># more learners are available, see ?learners</span></span>
<span></span>
<span><span class="va">sl_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>  formula <span class="op">=</span> <span class="va">mpg</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">hp</span>,</span>
<span>  learners <span class="op">=</span> <span class="va">learners</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the output from super_learner is a prediction function:</span></span>
<span><span class="co"># here we are producing predictions based on a weighted combination of the</span></span>
<span><span class="co"># trained learners. </span></span>
<span><span class="fu">sl_model</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="do">##         Mazda RX4     Mazda RX4 Wag        Datsun 710    Hornet 4 Drive </span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="do">##          20.36539          20.36539          25.25990          20.36539 </span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="do">## Hornet Sportabout           Valiant </span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="do">##          16.74482          19.99039</span></span></code></pre></div>
<div class="section level3">
<h3 id="one-step-up-fancy-formula-features">One Step Up: Fancy Formula Features<a class="anchor" aria-label="anchor" href="#one-step-up-fancy-formula-features"></a>
</h3>
<p>Continuing with our <code>mtcars</code> example, suppose the user would really like to use random effects or similar types of fancy formula language features. One easy way to do so with <code><a href="reference/super_learner.html">nadir::super_learner</a></code> is using the following syntax:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">learners</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>     glm <span class="op">=</span> <span class="va">lnr_glm</span>,</span>
<span>     rf <span class="op">=</span> <span class="va">lnr_rf</span>,</span>
<span>     glmnet <span class="op">=</span> <span class="va">lnr_glmnet</span>,</span>
<span>     lmer <span class="op">=</span> <span class="va">lnr_lmer</span>,</span>
<span>     gam <span class="op">=</span> <span class="va">lnr_gam</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">formulas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  .default <span class="op">=</span> <span class="va">mpg</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">hp</span>,   <span class="co"># our first three learners use same formula</span></span>
<span>  lmer <span class="op">=</span> <span class="va">mpg</span> <span class="op">~</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">cyl</span><span class="op">)</span> <span class="op">+</span> <span class="va">hp</span>, <span class="co"># both lme4::lmer and mgcv::gam have </span></span>
<span>  gam <span class="op">=</span> <span class="va">mpg</span> <span class="op">~</span> <span class="fu">s</span><span class="op">(</span><span class="va">hp</span><span class="op">)</span> <span class="op">+</span> <span class="va">cyl</span>      <span class="co"># specialized formula syntax</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># fit a super_learner</span></span>
<span><span class="va">sl_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>  formulas <span class="op">=</span> <span class="va">formulas</span>,</span>
<span>  learners <span class="op">=</span> <span class="va">learners</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu">sl_model</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="do">##         Mazda RX4     Mazda RX4 Wag        Datsun 710    Hornet 4 Drive </span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="do">##          20.31990          20.31990          24.97536          20.31990 </span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="do">## Hornet Sportabout           Valiant </span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="do">##          16.76212          19.98548</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="how-should-we-assess-performance-of-nadirsuper_learner">How should we assess performance of <code>nadir::super_learner()</code>?<a class="anchor" aria-label="anchor" href="#how-should-we-assess-performance-of-nadirsuper_learner"></a>
</h3>
<p>To put the learners and the super learner algorithm on a level playing field, it’s important that learners and super learner both be evaluated on <em>held-out validation/test data</em> that the algorithms have not seen before.</p>
<p>Using the <code>verbose = TRUE</code> output from <code><a href="reference/super_learner.html">nadir::super_learner()</a></code>, we can call <code><a href="reference/compare_learners.html">compare_learners()</a></code> to see the mean-squared-error (MSE) on the held-out data, also called CV-MSE, for each of the candidate learners specified.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># construct our super learner with verbose = TRUE</span></span>
<span><span class="va">sl_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>  formulas <span class="op">=</span> <span class="va">formulas</span>,</span>
<span>  learners <span class="op">=</span> <span class="va">learners</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="reference/compare_learners.html">compare_learners</a></span><span class="op">(</span><span class="va">sl_model</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="do">## The default in nadir::compare_learners is to use CV-MSE for comparing learners.</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="do">## Other metrics can be set using the loss_metric argument to compare_learners.</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="do">## # A tibble: 1 × 5</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="do">##     glm    rf glmnet  lmer   gam</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="do">## 1  12.2  8.95   12.2  13.0  11.5</span></span></code></pre></div>
<details><summary>
Plotting code
</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html" class="external-link">p_load</a></span><span class="op">(</span><span class="st">'dplyr'</span>, <span class="st">'ggplot2'</span>, <span class="st">'tidyr'</span>, <span class="st">'magrittr'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">truth</span> <span class="op">&lt;-</span> <span class="va">sl_model</span><span class="op">$</span><span class="va">holdout_predictions</span><span class="op">$</span><span class="va">mpg</span></span>
<span></span>
<span><span class="va">holdout_var</span> <span class="op">&lt;-</span> <span class="va">sl_model</span><span class="op">$</span><span class="va">holdout_predictions</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">.sl_fold</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">.</span> <span class="op">-</span> <span class="va">mpg</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span>, <span class="va">var</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">mpg</span>, <span class="op">-</span><span class="va">.sl_fold</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rownames_to_column</a></span><span class="op">(</span><span class="st">'learner'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>var <span class="op">=</span> <span class="va">V1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">var</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">jitters</span> <span class="op">&lt;-</span> <span class="va">sl_model</span><span class="op">$</span><span class="va">holdout_predictions</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="op">-</span><span class="va">.sl_fold</span>, <span class="op">~</span> <span class="op">(</span><span class="va">.</span> <span class="op">-</span> <span class="va">mpg</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">mpg</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">'learner'</span>, values_to <span class="op">=</span> <span class="st">'squared_error'</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">learner</span>, <span class="va">.sl_fold</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">squared_error</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span>fold <span class="op">=</span> <span class="va">.sl_fold</span><span class="op">)</span></span>
<span></span>
<span><span class="va">learner_comparison_df</span> <span class="op">&lt;-</span> <span class="va">sl_model</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/compare_learners.html">compare_learners</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rownames_to_column</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">'learner'</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>learner <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">learner</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>mse <span class="op">=</span> <span class="va">V1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">holdout_var</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    upper_ci <span class="op">=</span> <span class="va">mse</span> <span class="op">+</span> <span class="va">sd</span>,</span>
<span>    lower_ci <span class="op">=</span> <span class="va">mse</span> <span class="op">-</span> <span class="va">sd</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>learner <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">learner</span>, <span class="va">mse</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">jitters</span><span class="op">$</span><span class="va">learner</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">jitters</span><span class="op">$</span><span class="va">learner</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">learner_comparison_df</span><span class="op">$</span><span class="va">learner</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">learner_comparison_df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">learner</span>, x <span class="op">=</span> <span class="va">mse</span>, fill <span class="op">=</span> <span class="va">learner</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html" class="external-link">geom_jitter</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">jitters</span>, mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mse</span><span class="op">)</span>, height <span class="op">=</span> <span class="fl">.15</span>, shape <span class="op">=</span> <span class="st">'o'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_pointrange</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xmax <span class="op">=</span> <span class="va">upper_ci</span>, xmin <span class="op">=</span> <span class="va">lower_ci</span><span class="op">)</span>,</span>
<span>                           alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Comparison of Candidate Learners"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Error bars show ±1 standard deviation across the CV estimated MSE for each learner\n</span></span>
<span><span class="st">Each open circle represents the CV-MSE on one held-out fold of the data"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.caption.position <span class="op">=</span> <span class="st">'plot'</span><span class="op">)</span></span></code></pre></div>
</details><p><img src="reference/figures/readme_performance_of_learners.png"></p>
<p>Now how should we go about getting the CV-MSE from a super learned model? We will have to <a href="https://en.wikipedia.org/wiki/Currying" class="external-link"><em>curry</em></a> our super learner into a function that only takes in data (with all of its additional specification built into it) and which returns a prediction function (i.e., a closure).</p>
<p>Technical aside: Why should we “have to” curry this function? Well, to perform cross-validation on <code><a href="reference/super_learner.html">super_learner()</a></code>, behind the scenes, we’re going to want to split the data into training/validation sets and apply the same <code><a href="reference/super_learner.html">super_learner()</a></code> to each of the training sets, producing a prediction-closure from each, so that we can predict from them onto the held-out validation data. From that perspective, we basically want a function that only takes in one input (training data) and spits out the relevant prediction function (closure).</p>
<p>Don’t let all this complicated language scare you; it’s fairly straightforward. Essentially you just need to wrap your super learner specification inside <code>sl_closure &lt;- function(data) { ... }</code>, make sure you specify <code>data = data</code> inside the inner <code><a href="reference/super_learner.html">super_learner()</a></code> call, and you’re done.</p>
<p>The return value from such a function is a closure is because what <code><a href="reference/super_learner.html">super_learner()</a></code> returns is already a closure that eats in <code>newdata</code> and returns predictions.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sl_closure_mtcars</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">nadir</span><span class="fu">::</span><span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  formulas <span class="op">=</span> <span class="va">formulas</span>,</span>
<span>  learners <span class="op">=</span> <span class="va">learners</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">cv_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cv_super_learner.html">cv_super_learner</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">sl_closure_mtcars</span>, </span>
<span>                 y_variable <span class="op">=</span> <span class="st">'mpg'</span>,</span>
<span>                 n_folds <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="do">## boundary (singular) fit: see help('isSingular')</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="do">## The default is to report CV-MSE if no other loss_metric is specified.</span></span></code></pre></div>
<details><summary>
Plotting code
</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cv_jitters</span> <span class="op">&lt;-</span> <span class="va">cv_results</span><span class="op">$</span><span class="va">cv_trained_learners</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">split</span>, <span class="va">predictions</span>, <span class="va">mpg</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'predictions'</span>, <span class="st">'mpg'</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">split</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">mpg</span> <span class="op">-</span> <span class="va">predictions</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span>learner <span class="op">=</span> <span class="st">'super_learner'</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">cv_var</span> <span class="op">&lt;-</span> <span class="va">cv_results</span><span class="op">$</span><span class="va">cv_trained_learners</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">split</span>, <span class="va">predictions</span>, <span class="va">mpg</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">predictions</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>squared_error <span class="op">=</span> <span class="op">(</span><span class="va">mpg</span> <span class="op">-</span> <span class="va">predictions</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">split</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">squared_error</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">mse</span><span class="op">)</span>,</span>
<span>    mse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mse</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">var</span><span class="op">)</span>,</span>
<span>    upper_ci <span class="op">=</span> <span class="va">mse</span> <span class="op">+</span> <span class="va">sd</span>,</span>
<span>    lower_ci <span class="op">=</span> <span class="va">mse</span> <span class="op">-</span> <span class="va">sd</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span>learner <span class="op">=</span> <span class="st">'super_learner'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_jitters</span> <span class="op">&lt;-</span> <span class="fu">bind_rows</span><span class="op">(</span><span class="va">jitters</span>, <span class="va">cv_jitters</span><span class="op">)</span></span>
<span></span>
<span><span class="va">learner_comparison_df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">bind_rows</span><span class="op">(</span><span class="va">cv_var</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>learner <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">learner</span>, <span class="va">mse</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">learner</span>, x <span class="op">=</span> <span class="va">mse</span>, fill <span class="op">=</span> <span class="va">learner</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html" class="external-link">geom_jitter</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">new_jitters</span>, mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mse</span><span class="op">)</span>, height <span class="op">=</span> <span class="fl">.15</span>, shape <span class="op">=</span> <span class="st">'o'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_pointrange</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xmax <span class="op">=</span> <span class="va">upper_ci</span>, xmin <span class="op">=</span> <span class="va">lower_ci</span><span class="op">)</span>,</span>
<span>                           alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">'Set2'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Comparison of Candidate Learners against Super Learner"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Error bars show ±1 standard deviation across the CV estimated MSE for each learner\n</span></span>
<span><span class="st">Each open circle represents the CV-MSE on one held-out fold of the data"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.caption.position <span class="op">=</span> <span class="st">'plot'</span><span class="op">)</span></span></code></pre></div>
</details><p><img src="reference/figures/readme_performance_w_superlearner.png"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># iris example ---</span></span>
<span><span class="va">sl_model_iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">iris</span>,</span>
<span>  formula <span class="op">=</span> <span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span> <span class="op">+</span> <span class="va">Petal.Length</span> <span class="op">+</span> <span class="va">Petal.Width</span>,</span>
<span>  learners <span class="op">=</span> <span class="va">learners</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="reference/compare_learners.html">compare_learners</a></span><span class="op">(</span><span class="va">sl_model_iris</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="do">## The default in nadir::compare_learners is to use CV-MSE for comparing learners.</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="do">## Other metrics can be set using the loss_metric argument to compare_learners.</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="do">## # A tibble: 1 × 3</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="do">##     glm    rf glmnet</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="do">## 1 0.100 0.128  0.214</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sl_closure_iris</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">nadir</span><span class="fu">::</span><span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  formula <span class="op">=</span> <span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span> <span class="op">+</span> <span class="va">Petal.Length</span> <span class="op">+</span> <span class="va">Petal.Width</span>,</span>
<span>  learners <span class="op">=</span> <span class="va">learners</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="reference/cv_super_learner.html">cv_super_learner</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">iris</span>, <span class="va">sl_closure_iris</span>, y_variable <span class="op">=</span> <span class="st">'Sepal.Length'</span><span class="op">)</span><span class="op">$</span><span class="va">cv_mse</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="do">## The default is to report CV-MSE if no other loss_metric is specified.</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="do">## NULL</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="what-about-model-hyperparameters-or-extra-arguments">What about model hyperparameters or extra arguments?<a class="anchor" aria-label="anchor" href="#what-about-model-hyperparameters-or-extra-arguments"></a>
</h3>
<p>Model hyperparameters are easy to handle in <a href="https://ctesta01.github.io/nadir/">nadir</a>. Two easy solutions are available to users:</p>
<ul>
<li>
<code><a href="reference/super_learner.html">nadir::super_learner()</a></code> has an <code>extra_learner_args</code> parameter that can be passed a list of extra arguments for each learner.</li>
<li>Users can always build new learners (which allows for building in the hyperparameter specification), and using the <code>...</code> syntax, it’s easy to build new learners from the learners already provided by <a href="https://ctesta01.github.io/nadir/">nadir</a>.</li>
</ul>
<p>Here’s some examples showing each approach.</p>
<div class="section level4">
<h4 id="using-extra_learner_args">Using <code>extra_learner_args</code>:<a class="anchor" aria-label="anchor" href="#using-extra_learner_args"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># when using extra_learner_args, it's totally okay to use the </span></span>
<span><span class="co"># same learner multiple times as long as their hyperparameters differ.</span></span>
<span></span>
<span><span class="va">sl_model</span> <span class="op">&lt;-</span> <span class="fu">nadir</span><span class="fu">::</span><span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>  formula <span class="op">=</span> <span class="va">mpg</span> <span class="op">~</span> <span class="va">.</span>,</span>
<span>  learners <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    glmnet0 <span class="op">=</span> <span class="va">lnr_glmnet</span>,</span>
<span>    glmnet1 <span class="op">=</span> <span class="va">lnr_glmnet</span>,</span>
<span>    glmnet2 <span class="op">=</span> <span class="va">lnr_glmnet</span>,</span>
<span>    rf0 <span class="op">=</span> <span class="va">lnr_rf</span>,</span>
<span>    rf1 <span class="op">=</span> <span class="va">lnr_rf</span>,</span>
<span>    rf2 <span class="op">=</span> <span class="va">lnr_rf</span></span>
<span>    <span class="op">)</span>,</span>
<span>  extra_learner_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    glmnet0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lambda <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>    glmnet1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lambda <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>    glmnet2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lambda <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    rf0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ntree <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>    rf1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ntree <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    rf2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ntree <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/compare_learners.html">compare_learners</a></span><span class="op">(</span><span class="va">sl_model</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="do">## The default in nadir::compare_learners is to use CV-MSE for comparing learners.</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="do">## Other metrics can be set using the loss_metric argument to compare_learners.</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="do">## # A tibble: 1 × 6</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="do">##   glmnet0 glmnet1 glmnet2   rf0   rf1   rf2</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="do">##     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="do">## 1    9.56    8.37    8.04  11.2  6.80  6.10</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="building-new-learners-programmatically">Building New Learners Programmatically<a class="anchor" aria-label="anchor" href="#building-new-learners-programmatically"></a>
</h4>
<p>When does it make more sense to build new learners with the hyperparameters built into them rather than using the <code>extra_learner_args</code> parameter?</p>
<p>One instance when building new learners may make sense is when the user would like to produce a large number of hyperparameterized learners programmatically, for example over a grid of hyperparameter values. Below we show such an example for a 1-d grid of hyperparameters with <code>glmnet</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># produce a "grid" of glmnet learners with lambda set to </span></span>
<span><span class="co"># exp(-1 to 1 in steps of .1)</span></span>
<span><span class="va">hyperparameterized_learners</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">lambda</span><span class="op">)</span> <span class="op">{</span> </span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span></span>
<span>      <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">formula</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu">lnr_glmnet</span><span class="op">(</span><span class="va">data</span>, <span class="va">formula</span>, lambda <span class="op">=</span> <span class="va">lambda</span>, <span class="va">...</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  </span>
<span><span class="co"># give them names because nadir::super_learner requires that the </span></span>
<span><span class="co"># learners argument be named.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">hyperparameterized_learners</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'glmnet'</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">hyperparameterized_learners</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># fit the super_learner with 20 glmnets with different lambdas</span></span>
<span><span class="va">sl_model_glmnet</span> <span class="op">&lt;-</span> <span class="fu">nadir</span><span class="fu">::</span><span class="fu"><a href="reference/super_learner.html">super_learner</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>  learners <span class="op">=</span> <span class="va">hyperparameterized_learners</span>,</span>
<span>  formula <span class="op">=</span> <span class="va">mpg</span> <span class="op">~</span> <span class="va">.</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/compare_learners.html">compare_learners</a></span><span class="op">(</span><span class="va">sl_model_glmnet</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="do">## The default in nadir::compare_learners is to use CV-MSE for comparing learners.</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="do">## Other metrics can be set using the loss_metric argument to compare_learners.</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="do">## # A tibble: 1 × 21</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="do">##   glmnet1 glmnet2 glmnet3 glmnet4 glmnet5 glmnet6 glmnet7 glmnet8 glmnet9</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="do">##     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="do">## 1    7.76    7.73    7.71    7.69    7.68    7.69    7.71    7.75    7.80</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="do">## # ℹ 12 more variables: glmnet10 &lt;dbl&gt;, glmnet11 &lt;dbl&gt;, glmnet12 &lt;dbl&gt;,</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="do">## #   glmnet13 &lt;dbl&gt;, glmnet14 &lt;dbl&gt;, glmnet15 &lt;dbl&gt;, glmnet16 &lt;dbl&gt;,</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="do">## #   glmnet17 &lt;dbl&gt;, glmnet18 &lt;dbl&gt;, glmnet19 &lt;dbl&gt;, glmnet20 &lt;dbl&gt;,</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="do">## #   glmnet21 &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="what-are-currying-closures-and-function-factories">What are currying, closures, and function factories?<a class="anchor" aria-label="anchor" href="#what-are-currying-closures-and-function-factories"></a>
</h1>
<p><code>R</code> is a functional programming language, which allows for functions to build and return functions just like any other return object.</p>
<p>We refer to functions that create and return another function as a <em>function factory</em>. For an extended reference, see <a href="https://adv-r.hadley.nz/function-factories.html" class="external-link">the Advanced R book</a>.</p>
<p>Function factories are so useful in <a href="https://ctesta01.github.io/nadir/">nadir</a> because, at their essence, a candidate learner needs to be able to 1) accept training data, and 2) produce a prediction function that can make predictions on heldout validation data. So a typical learner in <a href="https://ctesta01.github.io/nadir/">nadir</a> looks like:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>lnr_lm <span class="ot">&lt;-</span> <span class="cf">function</span>(data, formula, ...) {</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  lnr_lm <span class="ot">&lt;-</span> <span class="cf">function</span>(data, formula, ...) {</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  model <span class="ot">&lt;-</span> stats<span class="sc">::</span><span class="fu">lm</span>(<span class="at">formula =</span> formula, <span class="at">data =</span> data, ...)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  predict_from_trained_lm <span class="ot">&lt;-</span> <span class="cf">function</span>(newdata) {</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>    <span class="fu">predict</span>(model, <span class="at">newdata =</span> newdata, <span class="at">type =</span> <span class="st">'response'</span>)</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>  }</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>  <span class="fu">return</span>(predict_from_trained_lm)</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>}</span></code></pre></div>
<p>Moreover, given how code-lightweight it is to write a simple learner, this makes it relatively easy for users to write new learners that meet their exact needs.</p>
<p>If you want to implement your own learners, you just need to follow the following pseudocode approach:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lnr_custom</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">formula</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">model</span> <span class="op">&lt;-</span> <span class="co"># train your model using data, formula, ... </span></span>
<span>  </span>
<span>  <span class="va">predict_from_model</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">newdata</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="co"># return predictions from the trained model </span></span>
<span>    <span class="co"># (predictions should be a vector of predictions, one for each row of newdata)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">predict_from_model</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><i>For more details, read the <b><a href="https://ctesta01.github.io/nadir/articles/currying_closures_and_function_factories.html">Currying, Closures, and Function Factories</a></b> article</i></p>
<div class="section level2">
<h2 id="coming-down-the-pipe-️">Coming Down the Pipe ↩︎️🚰🔧✨<a class="anchor" aria-label="anchor" href="#coming-down-the-pipe-%EF%B8%8F"></a>
</h2>
<ul>
<li>(More) Automated tests that try to ensure validity/correctness of the implementation!</li>
<li>Reworking some of the internals to use <a href="https://future.futureverse.org" class="external-link">future</a> and <a href="https://future.apply.futureverse.org" class="external-link">future.apply</a> and <a href="https://tlverse.org/origami/" class="external-link">origami</a>
</li>
<li>Performance benchmarking (hopefully leading to carefully considered improvements for speed)</li>
<li>More vignettes/articles soon.</li>
<li>Better explicit support for binary outcomes and density estimation.</li>
</ul>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ctesta01/nadir/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing nadir</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://ctesta.com" class="external-link">Christian Testa</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9103-5839" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://nimahejazi.org/" class="external-link">Nima Hejazi</a> <br><small class="roles"> Thesis advisor, author </small> <a href="https://orcid.org/0000-0002-7127-2789" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ctesta.com" class="external-link">Christian Testa</a>, <a href="https://nimahejazi.org/" class="external-link">Nima Hejazi</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

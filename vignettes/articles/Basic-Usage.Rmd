---
title: "Basic Examples"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(nadir)
```

### Example with the iris dataset

```{r}
learners <- list(
     glm = lnr_glm,
     rf = lnr_rf,
     glmnet = lnr_glmnet)

sl_model_iris <- super_learner(
  data = iris,
  formula = Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width,
  learners = learners,
  verbose = TRUE)
  
compare_learners(sl_model_iris)

cv_super_learner(
  data = iris, 
  formula = Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width,
  learners = learners)$cv_loss

var_residuals <- var(iris$Sepal.Length - sl_model_iris$sl_predictor(iris))
total_variance <- var(iris$Sepal.Length)
variance_explained <- total_variance - var_residuals 

rsquared <- variance_explained / total_variance
print(rsquared)
```
